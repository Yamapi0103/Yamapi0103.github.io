(function(e){function t(t){for(var a,o,s=t[0],c=t[1],u=t[2],p=0,d=[];p<s.length;p++)o=s[p],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&d.push(r[o][0]),r[o]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);l&&l(t);while(d.length)d.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],a=!0,s=1;s<n.length;s++){var c=n[s];0!==r[c]&&(a=!1)}a&&(i.splice(t--,1),e=o(o.s=n[0]))}return e}var a={},r={app:0},i=[];function o(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=a,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(n,a,function(t){return e[t]}.bind(null,a));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var l=c;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var a=n("85ec"),r=n.n(a);r.a},1:function(e,t){},"21bb":function(e,t,n){"use strict";var a=n("2dad"),r=n.n(a);r.a},"22de":function(e,t,n){"use strict";var a=n("8319"),r=n.n(a);r.a},"2dad":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},i=[],o=(n("034f"),n("2877")),s={},c=Object(o["a"])(s,r,i,!1,null,null,null),u=c.exports,l=n("8c4f"),p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{attrs:{id:"nav"}},[n("router-link",{attrs:{to:"/"}},[e._v("首頁")]),e._v("| "),n("router-link",{attrs:{to:"/collect"}},[e._v("收藏")])],1),n("router-view")],1)},d=[],g=(n("22de"),{}),f=Object(o["a"])(g,p,d,!1,null,null,null),v=f.exports,h=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home"},[n("div",{staticClass:"search d-flex jc-center mb-3"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.searchText,expression:"searchText"}],attrs:{type:"text"},domProps:{value:e.searchText},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.clickSearch(t)},input:function(t){t.target.composing||(e.searchText=t.target.value)}}}),n("span",{staticClass:"iconfont icon-search px-2 bg-light-1",on:{click:e.clickSearch}})]),n("div",{staticClass:"d-flex jc-center ai-center",attrs:{id:"condition"}},[e._v(" 各國的發燒影片: "),n("select",{directives:[{name:"model",rawName:"v-model",value:e.selectRegion,expression:"selectRegion"}],staticClass:"ml-2 p-1",on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selectRegion=t.target.multiple?n:n[0]}}},e._l(e.regionList,(function(t){return n("option",{key:t.id,domProps:{value:t.id}},[e._v(e._s(t.snippet.name))])})),0)]),e.videos?n("videoCard",{attrs:{videos:e.videos}}):e._e(),n("div",{staticClass:"text-center"},[n("paginate",{ref:"Pagination",attrs:{"page-count":e.pageCount,"click-handler":e.jumpPage,"prev-text":"Prev","next-text":"Next","container-class":"pagination","page-class":"page-item"}})],1)],1)},m=[],x=(n("a15b"),n("d81d"),n("5530")),b=(n("96cf"),n("1da1")),y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.videos?n("div",{staticClass:"video-wrap m-3 d-flex flex-wrap"},e._l(e.videos,(function(t,a){return n("div",{key:a,staticClass:"video p-2 mb-4"},[n("div",{staticClass:"h-100"},[n("router-link",{attrs:{to:"/video",tag:"figure"}},[n("img",{attrs:{src:t.snippet.thumbnails.medium.url}}),n("span",{staticClass:"time m-1 p-1 fs-xxs"},[e._v(e._s(e.durationParser(t.contentDetails.duration)))])]),n("div",{staticClass:"d-flex p-1 ai-center"},[n("div",{staticClass:"title ellipsis two-line flex-1"},[e._v(e._s(t.snippet.title))]),n("span",{staticClass:"iconfont pl-2 icon-heart",class:{"icon-heart1":e.IsFav(t.id)},on:{click:function(n){return e.toggleFavorite(t.id)}}})]),n("div",{staticClass:"channel-title p-1"},[e._v(e._s(t.snippet.channelTitle))]),n("div",{staticClass:"d-flex p-1 flex-wrap"},[n("div",{staticClass:"updateTime"},[e._v("上傳日期: "+e._s(e.publishedByNow(t.snippet.publishedAt)))]),n("div",[e._v("觀看次數: "+e._s(e.views(t.statistics.viewCount)))])]),n("span",{staticClass:"iconfont icon-youtube d-iflex ai-center",on:{click:function(n){return e.toYoutube(t.id)}}},[n("span",{staticClass:"pl-2 text-info"},[e._v("前往youtube")])])],1)])})),0):e._e()},w=[],k=(n("caad"),n("c975"),n("a434"),n("b680"),n("ac1f"),n("2532"),{data:function(){return{ids:JSON.parse(localStorage.getItem("id"))||[]}},props:{videos:{type:Array,required:!0}},computed:{},methods:{toYoutube:function(e){window.open("https://www.youtube.com/watch?v="+e,"_blank")},publishedByNow:function(e){var t=new Date(e),n=new Date;if(n.getFullYear()-t.getFullYear()>0)return n.getUTCFullYear()-t.getFullYear()+"年前";if(n.getMonth()-t.getMonth()>0)return n.getMonth()-t.getMonth()+"個月前";if(n.getDate()-t.getDate()>0){var a=n.getDate()-t.getDate();return a<7?a+"天前":parseInt(a/7)+"週前"}return n.getHours()-t.getHours()>0?n.getHours()-t.getHours()+"小時前":n.getMinutes()-t.getMinutes()>0?n.getMinutes()-t.getMinutes()+"分鐘前":n.getSeconds()-t.getSeconds()+"秒前"},durationParser:function(e){var t=/\d*H/.exec(e),n=/\d*M/.exec(e),a=/\d*S/.exec(e),r=function(e,t,n){var a="",r="",i="";return a=e?/\d*/.exec(e)[0]+":":"",t?(r=/\d*/.exec(t)[0],1===r.length&&(r="0"+r)):r="00",n?(i=/\d*/.exec(n)[0],1===i.length&&(i="0"+i)):i="00",a+r+":"+i};return r(t,n,a)},IsFav:function(e){return this.ids.includes(e)},toggleFavorite:function(e){var t=this.ids;t.indexOf(e)>-1?t.splice(t.indexOf(e),1):t.push(e),localStorage.id=JSON.stringify(t)},views:function(e){var t=this.getDigit(e);return t<4?e+"次":4===t?(e/Math.pow(10,4)).toFixed(1)+"萬次":t>4?Math.floor(e/Math.pow(10,4))+"萬次":t>=8?Math.floor(e/Math.pow(10,8))+"億次":void 0},getDigit:function(e){var t=-1;while(e>=1)t++,e/=10;return t}}}),P=k,_=(n("c128"),Object(o["a"])(P,y,w,!1,null,null,null)),O=_.exports,T={name:"home",components:{VideoCard:O},data:function(){return{videos:null,pageCount:0,count:12,pageNum:1,pageTokenPerPage:{},regionList:[],selectRegion:"TW",searchText:"",isSearch:!1}},created:function(){var e=this;return Object(b["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.fetchVideos({part:"snippet,statistics,contentDetails",regionCode:e.selectRegion,maxResults:e.count});case 2:return n=t.sent,e.videos=n.data.items,e.pageCount=Math.ceil(n.data.pageInfo.totalResults/e.count),localStorage.getItem("pageTokenPerPage")||e.queryPageToken(),t.next=8,e.fetchRegions();case 8:a=t.sent,e.regionList=a.data.items;case 10:case"end":return t.stop()}}),t)})))()},computed:{width:function(){return window.innerWidth}},watch:{selectRegion:function(){this.isSearch=!1,localStorage.removeItem("searchText"),this.resetPageNum(1),this.jumpPage(this.pageNum)}},methods:{jumpPage:function(e){var t=this;return Object(b["a"])(regeneratorRuntime.mark((function n(){var a,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.pageNum=e,t.pageTokenPerPage=JSON.parse(localStorage.pageTokenPerPage),!t.isSearch){n.next=13;break}return n.next=5,t.searchVideos({pageToken:e-2>=0?t.pageTokenPerPage[e-2].nextPageToken:null});case 5:return a=n.sent,console.log("res",a),r=a.data.items.map((function(e){return e.id.videoId})),n.next=10,t.fetchVideoById({id:r.join(",")});case 10:a=n.sent,n.next=16;break;case 13:return n.next=15,t.fetchVideos({part:"snippet,statistics,contentDetails",regionCode:t.selectRegion,maxResults:t.count,pageToken:e-2>=0?t.pageTokenPerPage[e-2].nextPageToken:null});case 15:a=n.sent;case 16:t.videos=a.data.items;case 17:case"end":return n.stop()}}),n)})))()},queryPageToken:function(){var e=this;return Object(b["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=0,t.next=3,e.fetchVideos({maxResults:e.count});case 3:a=t.sent,e.pageTokenPerPage[n++]={nextPageToken:a.data.nextPageToken};case 5:if(!a.data.nextPageToken){t.next=12;break}return t.next=8,e.fetchVideos({maxResults:e.count,pageToken:e.pageTokenPerPage[n-1].nextPageToken});case 8:a=t.sent,e.pageTokenPerPage[n++]={nextPageToken:a.data.nextPageToken,prevPageToken:a.data.prevPageToken},t.next=5;break;case 12:localStorage.setItem("pageTokenPerPage",JSON.stringify(e.pageTokenPerPage));case 13:case"end":return t.stop()}}),t)})))()},fetchVideos:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.$http.get("videos",{params:Object(x["a"])(Object(x["a"])({chart:"mostPopular"},e),{},{key:"AIzaSyAV_riwJ0Ow9XM9CaO3w2_2BDrxkU9rTEU"})})},fetchRegions:function(){return this.$http.get("i18nRegions",{params:{part:"snippet",hl:"zh_TW",key:"AIzaSyAV_riwJ0Ow9XM9CaO3w2_2BDrxkU9rTEU"}})},searchVideos:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=localStorage.searchText;return this.$http.get("search",{params:Object(x["a"])(Object(x["a"])({type:"video",q:t,maxResults:this.count},e),{},{key:"AIzaSyAV_riwJ0Ow9XM9CaO3w2_2BDrxkU9rTEU"})})},fetchVideoById:function(e){return this.$http.get("videos",{params:Object(x["a"])(Object(x["a"])({part:"snippet,statistics,contentDetails"},e),{},{key:"AIzaSyAV_riwJ0Ow9XM9CaO3w2_2BDrxkU9rTEU"})})},resetPageNum:function(e){this.$refs.Pagination.selected=e,this.pageNum=e},clickSearch:function(){var e=this;return Object(b["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.resetPageNum(1),e.isSearch=!0,localStorage.searchText=e.searchText,t.next=5,e.searchVideos();case 5:return n=t.sent,console.log("res",n),a=n.data.items.map((function(e){return e.id.videoId})),t.next=10,e.fetchVideoById({id:a.join(",")});case 10:n=t.sent,e.videos=n.data.items;case 12:case"end":return t.stop()}}),t)})))()}}},j=T,C=(n("21bb"),Object(o["a"])(j,h,m,!1,null,null,null)),S=C.exports,R=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"collect"},[e.videoByPage?n("VideoCard",{attrs:{videos:e.videoByPage}}):e._e(),n("div",{staticClass:"text-center"},[n("paginate",{attrs:{"page-count":e.pageCount,"click-handler":e.jumpTo,"prev-text":"Prev","next-text":"Next","container-class":"pagination","page-class":"page-item"}})],1)],1)},M=[],V=(n("fb6a"),{name:"collect",components:{VideoCard:O},data:function(){return{videos:null,pageCount:0,count:12,videoByPage:null}},created:function(){var e=this;return Object(b["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=JSON.parse(localStorage.id),!(n.length<=0)){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,e.fetchVideoById({id:n.join(",")});case 5:a=t.sent,e.videos=a.data.items,e.pageCount=Math.ceil(a.data.pageInfo.totalResults/e.count),e.videoByPage=e.videos.slice(0,e.count);case 9:case"end":return t.stop()}}),t)})))()},methods:{jumpTo:function(e){this.videoByPage=this.videos.slice((e-1)*this.count,e*this.count)},fetchVideoById:function(e){return this.$http.get("videos",{params:Object(x["a"])(Object(x["a"])({part:"snippet,statistics,contentDetails"},e),{},{key:"AIzaSyAV_riwJ0Ow9XM9CaO3w2_2BDrxkU9rTEU"})})}}}),I=V,D=Object(o["a"])(I,R,M,!1,null,null,null),N=D.exports,B=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"video-page"},[n("video-player",{attrs:{options:e.videoOptions}}),n("div",{staticClass:"mt-3 text-center"},[e._v(" 預設播放這支影片 ")])],1)},$=[],A=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("video",{ref:"videoPlayer",staticClass:"video-js"})},E=[],J=n("f0e2"),U={props:{options:{type:Object,default:function(){return{}}}},data:function(){return{player:null}},mounted:function(){this.player=Object(J["a"])(this.$refs.videoPlayer,this.options,(function(){console.log("onPlayerReady",this)}))},beforeDestroy:function(){this.player&&this.player.dispose()}},F=U,z=(n("b6b4"),Object(o["a"])(F,A,E,!1,null,null,null)),Y=z.exports,H={name:"VideoPage",components:{VideoPlayer:Y},data:function(){return{videoOptions:{autoplay:!0,controls:!0,sources:[{src:"http://vjs.zencdn.net/v/oceans.mp4",type:"video/mp4"}]}}}},X=H,q=Object(o["a"])(X,B,$,!1,null,null,null),L=q.exports;a["a"].use(l["a"]);var W=[{path:"/",component:v,children:[{path:"/",name:"home",component:S},{path:"/collect",name:"collect",component:N},{path:"/video",name:"video",component:L}]}],G=new l["a"]({mode:"history",routes:W}),K=G,Q=(n("78a7"),n("be35"),n("bc3a")),Z=n.n(Q),ee=(n("f9e3"),n("8832")),te=n.n(ee);n("fda2");a["a"].prototype.$http=Z.a.create({baseURL:"https://www.googleapis.com/youtube/v3"}),a["a"].component("paginate",te.a),a["a"].config.productionTip=!1,new a["a"]({router:K,render:function(e){return e(u)}}).$mount("#app")},"6cdf":function(e,t,n){},"78a7":function(e,t,n){},8319:function(e,t,n){},"85ec":function(e,t,n){},b6b4:function(e,t,n){"use strict";var a=n("6cdf"),r=n.n(a);r.a},be35:function(e,t,n){},bf58:function(e,t,n){},c128:function(e,t,n){"use strict";var a=n("bf58"),r=n.n(a);r.a}});
//# sourceMappingURL=app.81dd7e57.js.map